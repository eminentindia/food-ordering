function get_cart_count(){$.ajax({type:"POST",url:SITE_PATH+"action/get_cart_count.php",success:function(t){$(".CartCount").html(t)}})}function AddToCart(t,a,e){let n=0,r="",i=1;const u=[],o=$('input[name^="attribute_'+e+t+'"]:checked');if(o.each((function(){const a=parseFloat($(this).attr("data-price")),n=$(this).attr("data-sku"),r=parseFloat($(this).val()),i=parseInt($('input[name="quantity_'+e+t+n+'"]').val()),o=a*i;u.push({attributeID:r,totalPrice:o,quantity:i})})),o.length>0)n=parseFloat(o.attr("data-price")),sku=o.attr("data-sku"),r=parseFloat(o.val()),i=parseInt($('input[name="quantity_'+e+t+sku+'"]').val());else{const a=$("#price_"+e+t);n=parseFloat(a.data("price")),sku=a.data("sku"),quantityInputName="quantity_"+e+t+sku,i=parseInt($('input[name="'+quantityInputName+'"]').val())}const c={dishID:t,attributesData:u,attributeID:r,totalPrice:n*i,quantity:i,tiffin:e,selectedPrice:n},s=$("."+t+" .add-button-text"),d=s.find(".custom-loader");if(d.removeClass("d-none"),s.find(".text").addClass("d-none"),0==i)return alert("Goli Beta Masti Nhi !!"),d.addClass("d-none"),void s.find(".text").removeClass("d-none");$.ajax({type:"POST",url:SITE_PATH+"action/add_to_cart.php",data:c,dataType:"json",success:function(t){d.addClass("d-none"),s.find(".text").removeClass("d-none"),get_cart(),get_cart_count(),showNotification(t.message)}})}function AddToCartPlan(t,a,e){let n=0,r="",i=1;const u=[],o=$('input[name^="attribute_'+e+t+'"]:checked');if(o.each((function(){const a=parseFloat($(this).attr("data-price")),n=$(this).attr("data-sku"),r=parseFloat($(this).val()),i=parseInt($('input[name="quantity_'+e+t+n+'"]').val()),o=a*i;u.push({attributeID:r,totalPrice:o,quantity:i})})),o.length>0)n=parseFloat(o.attr("data-price")),sku=o.attr("data-sku"),r=parseFloat(o.val()),i=parseInt($('input[name="quantity_'+e+t+sku+'"]').val());else{const a=$("#price_"+e+t);n=parseFloat(a.data("price")),sku=a.data("sku"),quantityInputName="quantity_"+e+t+sku,i=parseInt($('input[name="'+quantityInputName+'"]').val())}const c={dishID:t,attributesData:u,attributeID:r,totalPrice:n*i,quantity:i,tiffin:e,selectedPrice:n},s=$("."+t+" .add-button-text"),d=s.find(".custom-loader");if(d.removeClass("d-none"),s.find(".text").addClass("d-none"),0==i)return alert("Goli Beta Masti Nhi !!"),d.addClass("d-none"),void s.find(".text").removeClass("d-none");$.ajax({type:"POST",url:SITE_PATH+"action/add_to_cartplan.php",data:c,dataType:"json",success:function(t){d.addClass("d-none"),s.find(".text").removeClass("d-none"),get_cart(),get_cart_count(),showNotification(t.message)}})}function showNotification(t){const a=$('<div class="notification">').text(t);$("body").append(a),setTimeout((function(){a.remove()}),4000),a.addClass("show")}function initializeQuantityButtons(){var t=document.querySelectorAll(".quantity-increment"),a=document.querySelectorAll(".quantity-decrement");t.forEach((function(t){t.addEventListener("click",(function(a){a.preventDefault();var e=t.parentNode.querySelector(".quantity-input");e.value=parseInt(e.value)+1}))})),a.forEach((function(t){t.addEventListener("click",(function(a){a.preventDefault();var e=t.parentNode.querySelector(".quantity-input");parseInt(e.value)>1&&(e.value=parseInt(e.value)-1)}))}))}function initializeCartQuantityButtons(){var t=document.querySelectorAll(".cartquantity-increment"),a=document.querySelectorAll(".cartquantity-decrement");function e(t,a,e,n){$("#loader_"+e).show();var r={productId:t,productSku:a,quantity:n};$.ajax({type:"POST",url:SITE_PATH+"action/update_cart",data:r,success:function(t){$("#loader_"+e).show(),get_cart()},error:function(t,a,e){console.error("AJAX request failed with status:",a)}})}t.forEach((function(t){t.addEventListener("click",(function(a){a.preventDefault(),e(t.parentNode.querySelector(".cartquantity-input").getAttribute("data-productId"),t.parentNode.querySelector(".cartquantity-input").getAttribute("data-productSku"),t.parentNode.querySelector(".cartquantity-input").getAttribute("data-productKey"),1)}))})),a.forEach((function(t){t.addEventListener("click",(function(a){a.preventDefault();var n=t.parentNode.querySelector(".cartquantity-input"),r=n.getAttribute("data-productId"),i=t.parentNode.querySelector(".cartquantity-input").getAttribute("data-productSku"),u=t.parentNode.querySelector(".cartquantity-input").getAttribute("data-productKey");parseInt(n.value)>1&&e(r,i,u,-1)}))}))}function removeCartItem(t){$("#loader_"+t).show(),$.ajax({type:"POST",url:SITE_PATH+"action/remove_cart_item.php",data:{key:t},success:function(a){$("#loader_"+t).hide();var e=$("#attr_"+t);e.fadeToggle(),e.css("transform","translateX(100px)"),get_cart_count(),get_cart()}})}function get_cart(){$.ajax({type:"post",url:SITE_PATH+"action/get_cart.php",success:function(t){$("#cart-container").html(t),initializeCartQuantityButtons()}})}get_cart_count(),$(document).ready((function(){initializeQuantityButtons()})),document.querySelectorAll(".nav-item").forEach((t=>{t.addEventListener("click",(t=>{$(window).width();var a=document.getElementById("tiffinmaindiv");a.scrollIntoView({behavior:"smooth"})}))})),$(document).ready((function(){get_cart()}));
